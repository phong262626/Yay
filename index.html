<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10s Secret Board</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <style>
        /* ‡∏ò‡∏µ‡∏°‡∏°‡∏∑‡∏î ‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö */
        :root { --bg: #121212; --msg-bg: #1e1e1e; --accent: #00e676; --text: #ffffff; }
        * { box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; height: 100vh; background: var(--bg); color: var(--text); 
            display: flex; flex-direction: column; overflow: hidden;
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß */
        header {
            padding: 15px; text-align: center; border-bottom: 1px solid #333;
            background: rgba(18, 18, 18, 0.95); z-index: 10;
        }
        h1 { margin: 0; font-size: 1.2rem; letter-spacing: 1px; color: var(--accent); }
        small { color: #666; font-size: 0.8rem; }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏£‡πå‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        #board {
            flex: 1; overflow-y: auto; padding: 20px;
            display: flex; flex-direction: column; gap: 10px;
            scroll-behavior: smooth;
        }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .msg-card {
            background: var(--msg-bg);
            padding: 15px; border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            position: relative; overflow: hidden;
            animation: popIn 0.3s ease-out;
            max-width: 85%; align-self: flex-start;
        }
        .msg-card.mine {
            align-self: flex-end; background: #2a3b55;
        }

        .msg-text { font-size: 1.1rem; line-height: 1.4; word-wrap: break-word; }
        .msg-time { font-size: 0.7rem; color: #aaa; margin-top: 5px; text-align: right; }

        /* ‡∏´‡∏•‡∏≠‡∏î‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á 10 ‡∏ß‡∏¥ */
        .progress-bar {
            position: absolute; bottom: 0; left: 0; height: 3px; background: var(--accent);
            width: 100%;
            animation: countdown 10s linear forwards;
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        footer {
            padding: 15px; background: #1a1a1a; border-top: 1px solid #333;
            display: flex; gap: 10px;
        }
        input {
            flex: 1; padding: 12px 20px; border-radius: 25px; border: none;
            background: #333; color: white; font-size: 1rem; outline: none;
        }
        button {
            background: var(--accent); color: #000; border: none;
            width: 50px; height: 50px; border-radius: 50%;
            font-weight: bold; cursor: pointer; font-size: 1.2rem;
            display: flex; align-items: center; justify-content: center;
            transition: 0.2s;
        }
        button:active { transform: scale(0.9); }

        /* Animations */
        @keyframes popIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeOut { to { opacity: 0; transform: scale(0.9); } }
        @keyframes countdown { from { width: 100%; } to { width: 0%; } }

    </style>
</head>
<body>

    <header>
        <h1>ü§´ Secret Board</h1>
        <small>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</small>
    </header>

    <div id="board">
        </div>

    <footer>
        <input type="text" id="msgInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠)..." autocomplete="off">
        <button onclick="sendMsg()">‚û§</button>
    </footer>

<script>
    // Config ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°)
    const firebaseConfig = {
        apiKey: "AIzaSyDHEHqYCU1dAJLOFPC7TLOa2KucoZG4bxA",
        authDomain: "wolf-game-fdb66.firebaseapp.com",
        databaseURL: "https://mooooo-9d6b8-default-rtdb.firebaseio.com",
        projectId: "wolf-game-fdb66",
        storageBucket: "wolf-game-fdb66.firebasestorage.app",
        messagingSenderId: "10904255215",
        appId: "1:10904255215:web:7a50312897b1e97c77f91a"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á ID ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡πÄ‡∏£‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå)
    let myId = localStorage.getItem('myId');
    if (!myId) {
        myId = Math.random().toString(36).substr(2, 9);
        localStorage.setItem('myId', myId);
    }

    const board = document.getElementById('board');
    const input = document.getElementById('msgInput');

    // ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
    // limitToLast(20) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Å‡πà‡∏≤‡πÜ ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ
    db.ref('secret_chat').limitToLast(20).on('child_added', (snapshot) => {
        const data = snapshot.val();
        const msgKey = snapshot.key;
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠
        const now = Date.now();
        const sentTime = data.timestamp;
        const timeDiff = now - sentTime;
        const timeLeft = 10000 - timeDiff; // 10,000 ms = 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ

        // ‡∏ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏™‡∏î‡∏á
        if (timeLeft <= 0) return;

        createMessageElement(data.text, data.senderId, timeLeft);
    });

    function createMessageElement(text, senderId, duration) {
        const div = document.createElement('div');
        div.className = `msg-card ${senderId === myId ? 'mine' : ''}`;
        
        div.innerHTML = `
            <div class="msg-text">${text}</div>
            <div class="msg-time">‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÉ‡∏ô 10 ‡∏ß‡∏¥</div>
            <div class="progress-bar" style="animation-duration: ${duration}ms"></div>
        `;

        board.appendChild(div);
        board.scrollTop = board.scrollHeight; // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î

        // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
        setTimeout(() => {
            div.style.animation = "fadeOut 0.5s forwards";
            setTimeout(() => div.remove(), 500); // ‡∏•‡∏ö Element ‡∏ó‡∏¥‡πâ‡∏á‡∏à‡∏£‡∏¥‡∏á
        }, duration);
    }

    function sendMsg() {
        const text = input.value.trim();
        if (!text) return;

        db.ref('secret_chat').push({
            text: text,
            senderId: myId,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        });

        input.value = "";
        input.focus();
    }

    // ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á
    input.addEventListener("keypress", function(event) {
        if (event.key === "Enter") sendMsg();
    });

</script>
</body>
</html>
