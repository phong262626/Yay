<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10s Secret Board</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <style>
        /* CSS Reset */
        :root { --bg: #121212; --msg-bg: #1e1e1e; --accent: #00e676; --text: #ffffff; }
        * { box-sizing: border-box; font-family: sans-serif; -webkit-tap-highlight-color: transparent; }
        
        body { 
            margin: 0; background: var(--bg); color: var(--text); 
            overflow: hidden; /* ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß Body */
            position: fixed; width: 100%; height: 100%; /* ‡∏•‡πá‡∏≠‡∏Ñ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô */
        header {
            position: absolute; top: 0; left: 0; width: 100%; height: 60px;
            background: rgba(18, 18, 18, 0.95); border-bottom: 1px solid #333;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 10;
        }
        h1 { margin: 0; font-size: 1.2rem; color: var(--accent); }
        small { color: #888; font-size: 0.8rem; }

        /* ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        #board {
            position: absolute; top: 60px; bottom: 80px; /* ‡πÄ‡∏ß‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡∏´‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏ó‡πâ‡∏≤‡∏¢ */
            left: 0; width: 100%;
            overflow-y: auto; padding: 20px;
            display: flex; flex-direction: column; gap: 10px;
        }

        /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
        .msg-card {
            background: var(--msg-bg); padding: 12px 15px; border-radius: 12px;
            max-width: 85%; align-self: flex-start;
            position: relative; animation: popIn 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }
        .msg-card.mine { align-self: flex-end; background: #2a3b55; }
        .msg-text { font-size: 1rem; line-height: 1.4; }
        .progress-bar {
            height: 3px; background: var(--accent); margin-top: 8px; width: 100%;
            animation: countdown 10s linear forwards;
        }

        /* ‡∏™‡πà‡∏ß‡∏ô‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏•‡∏≠‡∏¢‡∏ï‡∏¥‡∏î‡∏Ç‡∏≠‡∏ö‡∏•‡πà‡∏≤‡∏á) */
        footer {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 80px;
            background: #1a1a1a; border-top: 1px solid #333;
            display: flex; align-items: center; justify-content: center;
            padding: 10px; z-index: 20;
        }
        
        .input-group {
            display: flex; width: 100%; max-width: 600px; gap: 10px;
        }

        input {
            flex: 1; padding: 12px 20px; border-radius: 25px; border: none;
            background: #333; color: white; font-size: 1rem; outline: none;
        }
        button {
            background: var(--accent); color: #000; border: none;
            width: 45px; height: 45px; border-radius: 50%;
            font-size: 1.2rem; font-weight: bold; cursor: pointer;
        }

        @keyframes popIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes countdown { from { width: 100%; } to { width: 0%; } }
        @keyframes fadeOut { to { opacity: 0; } }
    </style>
</head>
<body>

    <header>
        <h1>ü§´ Secret Board</h1>
        <small>‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡πÑ‡∏õ‡πÉ‡∏ô 10 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</small>
    </header>

    <div id="board">
        </div>

    <footer>
        <div class="input-group">
            <input type="text" id="msgInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." autocomplete="off">
            <button onclick="sendMsg()">‚û§</button>
        </div>
    </footer>

<script>
    // Config ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏û‡∏µ‡πà (‡∏´‡πâ‡∏≤‡∏°‡∏•‡∏ö)
    const firebaseConfig = {
        apiKey: "AIzaSyDHEHqYCU1dAJLOFPC7TLOa2KucoZG4bxA",
        authDomain: "wolf-game-fdb66.firebaseapp.com",
        databaseURL: "https://mooooo-9d6b8-default-rtdb.firebaseio.com",
        projectId: "wolf-game-fdb66",
        storageBucket: "wolf-game-fdb66.firebasestorage.app",
        messagingSenderId: "10904255215",
        appId: "1:10904255215:web:7a50312897b1e97c77f91a"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á ID ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß
    let myId = localStorage.getItem('myId');
    if (!myId) {
        myId = Math.random().toString(36).substr(2, 9);
        localStorage.setItem('myId', myId);
    }

    const board = document.getElementById('board');
    const input = document.getElementById('msgInput');

    // ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà
    db.ref('secret_chat').limitToLast(15).on('child_added', (snapshot) => {
        const data = snapshot.val();
        const now = Date.now();
        const timeLeft = 10000 - (now - data.timestamp);

        if (timeLeft > 0) {
            showMsg(data.text, data.senderId, timeLeft);
        }
    });

    function showMsg(text, senderId, duration) {
        const div = document.createElement('div');
        div.className = `msg-card ${senderId === myId ? 'mine' : ''}`;
        div.innerHTML = `
            <div class="msg-text">${text}</div>
            <div class="progress-bar" style="animation-duration: ${duration}ms"></div>
        `;
        
        board.appendChild(div);
        
        // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏•‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        setTimeout(() => { board.scrollTop = board.scrollHeight; }, 100);

        // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏ö
        setTimeout(() => {
            div.style.animation = "fadeOut 0.5s forwards";
            setTimeout(() => div.remove(), 500);
        }, duration);
    }

    function sendMsg() {
        const txt = input.value.trim();
        if(!txt) return;

        db.ref('secret_chat').push({
            text: txt,
            senderId: myId,
            timestamp: firebase.database.ServerValue.TIMESTAMP
        });
        
        input.value = "";
        input.focus();
    }

    // ‡∏Å‡∏î Enter ‡∏™‡πà‡∏á‡πÑ‡∏î‡πâ
    input.addEventListener("keypress", (e) => {
        if(e.key === "Enter") sendMsg();
    });

</script>
</body>
</html>
